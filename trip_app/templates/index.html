{% extends "base.html" %}
{% block title %}<title>Welcome TS</title> {% endblock %}
{% block head %}
    <script src="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.css"/>
{% endblock %}


{% block content %}
    <div class="container d-flex justify-content-around rounded rgba-black-strong align-items-center p-2">
        <!-- introduce  -->
        <div class="text-white text-center">
            <h1><b class="">Trip Story</b></h1>
            <hr class="bg-white rounded" style="height: 2.5px;">
            <h3>Record and share your trip</h3>
        </div>
        <!-- login form -->
        <form action="/login" class="white rounded p-3" method="post">
            <div class="text-center">
                <h3>Login</h3>
                <hr class="rounded">
            </div>

            <div class="md-form md-outline input-with-pre-icon">
                <i class="fas fa-user input-prefix"></i>
                <input type="text" class="form-control" id="id" name="id" required>
                <label for="id">id</label>
            </div>

            <div class="md-form md-outline input-with-pre-icon">
                <i class="fas fa-lock  input-prefix"></i>
                <input type="password" class="form-control" id="password" name="password" required>
                <label for="password">password</label>
            </div>

            <div class="d-flex justify-content-around">
                <input type="submit" class="btn btn-primary" value="Sign in">
                <input type="button" class="btn btn-info" value="Sign Up" data-toggle="modal"
                       data-target="#modalSignUpForm">
            </div>
            <div class="d-flex flex-column">
                social login
            </div>
        </form>
    </div>
    <h3 class="text-white ml-5 mb-5" style="position: absolute; bottom: 20px; left: 20px">
        <i class="fab fa-connectdevelop"></i>
        Powered By MDSU
    </h3>
    {% include "signup-modal.html" %}
{% endblock %}
{% block js %}
    <script src="../static/js/sign_up.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyA1xfn3hqSfHllqsXtPPZYJ-aBYFzDsG1g",
            authDomain: "trip-story-b29e1.firebaseapp.com",
            databaseURL: "https://trip-story-b29e1.firebaseio.com",
            projectId: "trip-story-b29e1",
            storageBucket: "trip-story-b29e1.appspot.com",
            messagingSenderId: "636952467671",
            appId: "1:636952467671:web:01fa859785996177a5f892"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        var provider = new firebase.auth.GoogleAuthProvider();
        provider.addScope('https://www.googleapis.com/auth/contacts.readonly');

        firebase.auth().signInWithPopup(provider).then(function (result) {
            // This gives you a Google Access Token. You can use it to access the Google API.
            var token = result.credential.accessToken;
            // The signed-in user info.
            var user = result.user;
            // ...
        }).catch(function (error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // The email of the user's account used.
            var email = error.email;
            // The firebase.auth.AuthCredential type that was used.
            var credential = error.credential;
            // ...
        });
        firebase.auth().getRedirectResult().then(function (result) {
            if (result.credential) {
                // This gives you a Google Access Token. You can use it to access the Google API.
                var token = result.credential.accessToken;
                // ...
            }
            // The signed-in user info.
            var user = result.user;
        }).catch(function (error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // The email of the user's account used.
            var email = error.email;
            // The firebase.auth.AuthCredential type that was used.
            var credential = error.credential;
            // ...
        });
    </script>
{% endblock %}